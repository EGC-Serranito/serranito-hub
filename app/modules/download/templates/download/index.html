{% extends "base_template.html" %}

{% block title %}
Download datasets
{% endblock %}

{% block content %}

<h1 class="h3 mb-3"><b style="color: white">Download datasets</b></h1>

<p>To download a zip file with all the datasets, click the following button:</p>

<a href="/download/all" class="btn btn-primary mb-4">Download all datasets</a>

<h2><b style="color: white">Download datasets by date</b></h2>

<p>Select a start and end date to download datasets created within that range:</p>

<form id="date-range-form" action="/download/by-date" method="POST" class="mt-3">
  <div class="row">
    <div class="col-md-5">
      <label for="start_date" class="form-label text-white">Start Date</label>
      <input type="date" id="start_date" name="start_date" class="form-control" required>
    </div>
    <div class="col-md-5">
      <label for="end_date" class="form-label text-white">End Date</label>
      <input type="date" id="end_date" name="end_date" class="form-control" required>
    </div>
    <div class="col-md-2 d-flex align-items-end">
      <button type="submit" class="btn btn-primary mb-1">Download</button>
    </div>
  </div>
</form>

<script>
  document.getElementById('date-range-form').addEventListener('submit', function(event) {
    const startDate = document.getElementById('start_date').value;
    const endDate = document.getElementById('end_date').value;

    if (startDate && endDate && startDate > endDate) {
      event.preventDefault();
      alert('The end date cannot be earlier than the start date. Please correct the dates.');
    }
  });
</script>

{% endblock %}
